#!/bin/sh
sed -r 's/`1(.+)/<h1>\1<\/h1>/
s/`2(.+)/<h2>\1<\/h2>/
s/`3(.+)/<h3>\1<\/h3>/
s/`4(.+)/<h4>\1<\/h4>/
s/`b(.+)`b/<strong>\1<\/strong>/
s/`i(.+)`i/<em><strong>\1<\/strong><\/em>/
/`l/,/^$/{
			s/`l(.+)/<ul><li>\1<\/li>/
			s/^[^<]+/<li>&<\/li>/
			s/^$/<\/ul>\n/
		} 

/`n/,/^$/{
			s/`n(.+)/<ol><li>\1<\/li>/
			s/^[^<]+/<li>&<\/li>/
			s/^$/<\/ol>\n/
		} 		
		' $* |
awk '{RS="\0"; $0 = gensub("([^><`\n])(\n)([^><`\n])", "\\1 \\3", "g", $0); print}' |
sed -r 's/^([^`<].+)/<p>\1<\/p>/
/^$/d '
